<html><head><script type='text/javascript' src='jquery-latest.js'></script><link rel='stylesheet' type='text/css' href='SfApexDoc.css' /> <script>$(document).ready(function() {$('.toggle_container').hide();
$('h2.trigger').click(function() {
$(this).toggleClass('active').next().slideToggle('fast');ToggleBtnLabel(this.firstChild);return false; });});
function gotomenu(url) {document.location.href = url;}
function ToggleBtnLabel(ctrl) {ctrl.value = (ctrl.value=='+' ? '-' : '+');}
function IsExpanded(ctrl) {return (ctrl.value == '-');}
function ToggleAll(e) {var cExpanded = 0;$('h2.trigger', $(e).closest('tr')).each(function() {if (!IsExpanded(this.firstChild)) {$(this).toggleClass('active').next().slideToggle('fast');ToggleBtnLabel(this.firstChild);cExpanded++;}});if (cExpanded == 0) {$('h2.trigger', $(e).closest('tr')).each(function() {$(this).toggleClass('active').next().slideToggle('fast');ToggleBtnLabel(this.firstChild);});}}
</script></head><body><div class='topSection'><table><tr><td><img id='logo' src='logo.png'/></td><td><h2>Cross-Cutting Concerns (primarily logging)</h2>Is designed to encapsulated common cross-cutting concerns (logging, exception handling, etc.). Often times cross-cutting concerns are an after-thought; or, hastily injected without any ability to manage or control. This project was to encapsulate those concerns and provide a mechanism to change/augment. Changing behaviour is a matter of inheritance and specifying choice via custom metadata.<br/></td></tr></table></div><table width='100%'><tr><td class='leftmenus' rowspan='100'><div onclick="gotomenu('index.html');">Home</div><div onclick="gotomenu('accc_apexapplicationexception.html');">accc_ApexApplicationException</div><div onclick="gotomenu('accc_apexbasefallback.html');">accc_ApexBaseFallback</div><div onclick="gotomenu('accc_apexbaseruntimeenvironment.html');">accc_ApexBaseRuntimeEnvironment</div><div onclick="gotomenu('accc_apexclassinstancemgr.html');">accc_ApexClassInstanceMgr</div><div onclick="gotomenu('accc_apexconstants.html');">accc_ApexConstants</div><div onclick="gotomenu('accc_apexenvironment.html');">accc_ApexEnvironment</div><div onclick="gotomenu('accc_apexexceptionhandler.html');">accc_ApexExceptionHandler</div><div onclick="gotomenu('accc_apexexceptionpolicystrategy.html');">accc_ApexExceptionPolicyStrategy</div><div onclick="gotomenu('accc_apexknownccconcernsfallback.html');">accc_ApexKnownCCConcernsFallback</div><div onclick="gotomenu('accc_apexlocall1cache.html');">accc_ApexLocalL1Cache</div><div onclick="gotomenu('accc_apexlogdatamodel.html');">accc_ApexLogDataModel</div><div onclick="gotomenu('accc_apexlogformatter.html');">accc_ApexLogFormatter</div><div onclick="gotomenu('accc_apexlogger.html');">accc_ApexLogger</div><div onclick="gotomenu('accc_apexnooplogger.html');">accc_ApexNoOpLogger</div><div onclick="gotomenu('accc_apexobjectfactory.html');">accc_ApexObjectFactory</div><div onclick="gotomenu('accc_apexobjectlogger.html');">accc_ApexObjectLogger</div><div onclick="gotomenu('accc_apexperformancemetrics.html');">accc_ApexPerformanceMetrics</div><div onclick="gotomenu('accc_apexplatformeventdispatcher.html');">accc_ApexPlatformEventDispatcher</div><div onclick="gotomenu('accc_apexprevioustransactionresult.html');">accc_ApexPreviousTransactionResult</div><div onclick="gotomenu('accc_apexpublisheventlogger.html');">accc_ApexPublishEventLogger</div><div onclick="gotomenu('accc_apexrunenvironmentsingleton.html');">accc_ApexRunEnvironmentSingleton</div><div onclick="gotomenu('accc_apextestjsondatafallback.html');">accc_ApexTestJSONDataFallback</div><div onclick="gotomenu('accc_apextestobjectfactory.html');">accc_ApexTestObjectFactory</div><div onclick="gotomenu('accc_apextestutilities.html');">accc_ApexTestUtilities</div><div onclick="gotomenu('accc_apexutilities.html');">accc_ApexUtilities</div><div onclick="gotomenu('accc_applicationlog.html');">accc_ApplicationLog</div><div onclick="gotomenu('accc_basemdtdatamodel.html');">accc_BaseMdtDataModel</div><div onclick="gotomenu('accc_crosscuttingconfigdatamodel.html');">accc_CrossCuttingConfigDataModel</div><div onclick="gotomenu('accc_crosscuttingconfigmgr.html');">accc_CrossCuttingConfigMgr</div><div onclick="gotomenu('accc_crosscuttingutilitydatamodel.html');">accc_CrossCuttingUtilityDataModel</div><div onclick="gotomenu('accc_customsettings.html');">accc_CustomSettings</div><div onclick="gotomenu('accc_exceptionformatter.html');">accc_ExceptionFormatter</div><div onclick="gotomenu('accc_genericdbresulthandler.html');">accc_GenericDbResultHandler</div><div onclick="gotomenu('accc_iapexexceptionhandler.html');">accc_IApexExceptionHandler</div><div onclick="gotomenu('accc_iapexexceptionpolicystrategy.html');">accc_IApexExceptionPolicyStrategy</div><div onclick="gotomenu('accc_iapexfactory.html');">accc_IApexFactory</div><div onclick="gotomenu('accc_iapexmessagesender.html');">accc_IApexMessageSender</div><div onclick="gotomenu('accc_iapexobjectgetter.html');">accc_IApexObjectGetter</div><div onclick="gotomenu('accc_iapexplatformeventhandler.html');">accc_IApexPlatformEventHandler</div><div onclick="gotomenu('accc_iapexrunenvironment.html');">accc_IApexRunEnvironment</div><div onclick="gotomenu('accc_iconfigurationprovider.html');">accc_IConfigurationProvider</div><div onclick="gotomenu('accc_idataformat.html');">accc_IDataFormat</div><div onclick="gotomenu('accc_ifallbackresources.html');">accc_IFallbackResources</div><div onclick="gotomenu('accc_ilogger.html');">accc_ILogger</div><div onclick="gotomenu('accc_iprevioustransactionresult.html');">accc_IPreviousTransactionResult</div><div onclick="gotomenu('accc_logplatformeventhandler.html');">accc_LogPlatformEventHandler</div><div onclick="gotomenu('accc_messagetransformation.html');">accc_MessageTransformation</div><div onclick="gotomenu('accc_namevaluepair.html');">accc_NameValuePair</div><div onclick="gotomenu('accc_queablesobjects.html');">accc_QueableSObjects</div><div onclick="gotomenu('accc_sobjectbasewriter.html');">accc_SObjectBaseWriter</div><div onclick="gotomenu('accc_stopwatch.html');">accc_StopWatch</div><div onclick="gotomenu('accc_syncasyncwriter.html');">accc_SyncAsyncWriter</div><div onclick="gotomenu('accc_testenvironmentsingleton.html');">accc_TestEnvironmentSingleton</div><div onclick="gotomenu('accc_triggerhelperclass.html');">accc_TriggerHelperClass</div><div onclick="gotomenu('accc_virtualcustomsettings.html');">accc_VirtualCustomSettings</div></td><td><h2 class='section-title'>Home</h2><div class=WordSection1><h1>Cross-Cutting Concerns (CCC)</h1><p>Version 0.9.6.1</p><h2>What is it?</h2><p class=MsoNormal>The cross-cutting concerns/aspects consist of security, exception handling, logging, etc. These aspects transcend into other concerns (i.e., layers). In a simple layered architecture you have three common layers: Presentation, Business and Data. The cross-cutting concerns are applicable throughout the architecture layers and it affects the entire  application. For example: logging, security and data transfer are the concerns which are needed in almost every module of an application, hence they arecross-cutting concerns.</p><h2>What is the value?</h2><p class=MsoNormal>Without some framework, or extensible tools, cross-cutting concerns are piecemealed, forgotten, or a mish-mash of incongruous parts. Development often forgets these aspects because it is boring or just an after-thought.When you do need these aspects you patch only a portion or where there is a problem; but not consistently through-out. The foundations become tenuous and left neglected. </p><p class=MsoNormal>The value lies in being consistent, reliable, reusable and flexible; understanding one size does not fit all.</p><h2>Why do it?</h2><p class=MsoNormal>In many object orient languages you will find solid frameworks which support these aspects, for example, Javaâ¬"s <i style='mso-bidi-font-style:normal'>Spring, </i>Hibernate, C#â¬"s <i style='mso-bidi-font-style:normal'>Spring.Net,NHibernate</i>, just to name a few<i style='mso-bidi-font-style:normal'>. <spanstyle='mso-spacerun:yes'>Â </span></i>However, I did not find the same in Apex. I found some aspects but not dedicated to JUST cross-cutting concerns. Second, I consider these aspects as foundational; where others consider them, <istyle='mso-bidi-font-style:normal'>boring</i>, <i style='mso-bidi-font-style:normal'>not sexy</i>, <i style='mso-bidi-font-style:normal'>or not important</i>.</p><p class=MsoNormal>Cross-cutting Concerns (CCC) attempts to provide functionality that is was arduous in Apex than in other STOOLs<astyle='mso-footnote-id:ftn1' href="#_ftn1" name="_ftnref1" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]><spanclass=MsoFootnoteReference><span style='font-size:11.0pt;line-height:107%;font-family:"Calibri",sans-serif;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;mso-hansi-theme-font:minor-latin;mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA'>[1]</span></span><![endif]></span></span></a>. The goal was to apply <ahref="https://en.wikipedia.org/wiki/SOLID_(object-oriented_design)">SOLID</a><astyle='mso-footnote-id:ftn2' href="#_ftn2" name="_ftnref2" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]><spanclass=MsoFootnoteReference><span style='font-size:11.0pt;line-height:107%;font-family:"Calibri",sans-serif;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;mso-hansi-theme-font:minor-latin;mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA'>[2]</span></span><![endif]></span></span></a>principles to allow flexibility to change and reuse.</p><h2>How does it works?</h2><p class=MsoNormal>Defining a set of common interfaces and custom metadata within the CCC framework allows one to change/augment aspects at different levels/granularity. The best way to understand the value is with a concrete example.</p><p class=MsoNormal>For example, if we look at a common concern, such as <istyle='mso-bidi-font-style:normal'>Logging</i>, one can see the two values eluded to earlier. First, there is the logging interface, <span class=SpellE><istyle='mso-bidi-font-style:normal'>ILogger</i></span>. The interface allows a myriad of logging behaviour. For example, Logging supports four different functionalities</p><ol><li>Logging to Salesforce Debug Log(<i>accc_ApexLogging->accc_ILogger</i>)</li><li>Logging to a custom object, AcccApplication_Log (<i>accc_ApexObjectLogging -> accc_ApexLogging</i>)</li><li>Logging via Platform Events (<i>accc_ApexPublishEventLogger->accc_ApexLogging</i>)</li><li>Turning off Logging  (<i>accc_ApexNoOpLogger->accc_ApexLogging</i>)</li></ol><p>The above loggers provides an easier way to log messages (without commenting out). In addition to the above loggers, there is the ability to <i>trace</i> information. Tracing allows you to setup sentinels. Sentinels/Traces can be turned on and off.Trace also adds additional information, such as <i>class-name, method-name, start-time, stack-trace, and line number </i>. These attributes are automatically added to the the log message by varying the <b>LoggingLevel</b>. More on this in the Logger section. </p><p><img src="../logging.png" alt="logging"  width="623" height="150" </></p><p class=MsoCaption>Figure<span style='mso-no-proof:yes'>1</span>&nbsp;Logging</p><p class=MsoNormal>Second, there is the use of custom metadata. CCC frameworkuses two important aspects, (1) an Object Factory (<span class=SpellE><istyle='mso-bidi-font-style:normal'>accc_ApexObjectFactory</i></span>) and (2) a Runtime environment (<span class=SpellE><i style='mso-bidi-font-style:normal'>accc_ApexBaseRuntimeEnvironment</i></span>).These two classes (which also have a defined interface) allow one to seed (via a custom metadata object) the object factory with the supported interface.</p><p class=MsoNormal>Thus, you can change the runtime behaviour of <istyle='mso-bidi-font-style:normal'>Logging</i>. At this time, CCC supportsthree runtime environments:</p><ol><li><b>Debug </b>[i.e. When you run in a Sandbox?]</li><li><b>Test </b>[i.e., When you run Tests (Test.isRunning)?]</li><li><b>Production</b> (neither 1 nor 2)</li></ol></div><div style='mso-element:footnote-list'><![if !supportFootnotes]><br clear=all><hr align=left size=1 width="33%"><![endif]><!-- Tab content --><div id="content" class="tabcontent"><TABLE><tr><td><h3>Exception Handling</h3><a href='.' onclick="gotomenu('https://github.com/bjanderson70/sf-cross-cutting-concerns/wiki/Exception-Handling', event);return false;" class='nav-item'><img src="../exceptionhandling.png" alt="exception handling" width="80" height="80"/></a></td><td>Properly wrapping challenging code in a try/catch block is the first step. Please note, handling an exception with an exception handler is NOT always needed. The primary goal is to simplify exception handling and management at your application or layer boundaries. The information below provides a high-level view</td><td><h3>Data Model Classes</h3><a href='.' onclick="gotomenu('https://github.com/bjanderson70/sf-cross-cutting-concerns/wiki/Data-Model-Classes', event);return false;" class='nav-item'><img src="../datamodeling.png" alt="data model classes" width="80" height="80"/></a></td><td>The Data model provides access to the custom metadata. This allows the run-time environment to vary as needed. Note, this version remove the caching mechanism.</td></tr><tr><td><h3>Logging</h3><a href='.' onclick="gotomenu('https://github.com/bjanderson70/sf-cross-cutting-concerns/wiki/Logging', event);return false;" class='nav-item'><img src="../logging.png" alt="logging" width="80" height="80"/></a></td><td>Provide a flexible logging behaviour that allows run-time change as well augmentation.</td><td><h3>Caching</h3><a href='.' onclick="gotomenu('https://github.com/bjanderson70/sf-cross-cutting-concerns/wiki/Caching', event);return false;" class='nav-item'><img src='../caching.png' alt="caching" width="80" height="80" /></a></td><td>Caching implementation is not provided in this abbreviated version. However, it is available via the link above.</td></tr><tr><td><h3>Factory and Runtime</h3><a href='.' onclick="gotomenu('https://github.com/bjanderson70/sf-cross-cutting-concerns/wiki/Factory-and-Runtime', event);return false;" class='nav-item'><img src='../factory.png' alt="factory/runtime" width="80" height="80"/></a></td><td>The Factory and Runtime supports run-time changes. There is a object factory which loads the custom metadata. There is a run-time environment which pullsfrom the object factory the desired behaviour. The Object Factory uses the run-time (test, production, debug) to serve up the implementation to interface.</td><td><h3>Common</h3><a href='.' onclick="gotomenu('https://github.com/bjanderson70/sf-cross-cutting-concerns/wiki/Common', event);return false;" class='nav-item'><img src='../common.png'  alt="common" width="80" height="80"/></a></a></td><td>These are helper methods, utilities, etc.</td></tr></table></div><div style='mso-element:footnote' id=ftn1><p class=MsoFootnoteText><a style='mso-footnote-id:ftn1' href="#_ftnref1"name="_ftn1" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><spanstyle='font-size:10.0pt;line-height:107%;font-family:"Calibri",sans-serif;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;mso-hansi-theme-font:minor-latin;mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA'>[1]</span></span><![endif]></span></span></a>Static Object Orient Languages<o:p></o:p></p></div><div style='mso-element:footnote' id=ftn2><p class=MsoFootnoteText><a style='mso-footnote-id:ftn2' href="#_ftnref2"name="_ftn2" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><spanstyle='font-size:10.0pt;line-height:107%;font-family:"Calibri",sans-serif;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;mso-hansi-theme-font:minor-latin;mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA'>[2]</span></span><![endif]></span></span></a> <bstyle='mso-bidi-font-weight:normal'>S</b>ingle Responsibilities, Open-Closed, <bstyle='mso-bidi-font-weight:normal'>L</b>iskov Substitutability, <bstyle='mso-bidi-font-weight:normal'>I</b>nterface Segregation, <bstyle='mso-bidi-font-weight:normal'>D</b>ependency Inversion.<o:p></o:p></p></div></div></td></div></div></td></tr></table><hr/><center id='footer'><a href='https://gitlab.com/StevenWCox/sfapexdoc/wikis/Home'>Powered By SfApexDoc version 1.2.5</a></center></body></html>